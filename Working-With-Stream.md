
# 5.1 필터링(스트림의 요소를 선택)

## 5.1.1 프레디케이트로 필터링 (predicate)

프레디케이트(predicate): 불리언을 반환하는 함수

filter 메소드는 프레디케이트를 인수로 받아서 프레디케이트와 일치하는 모든 요소를 포함하는 스트림을 반환할 수 있다.  

## 5.1.2 고유 요소 필터링 (distinct)

 dictinct: 고유 요소로 이루어진 스트림을 반환(고유 여부는 스트림에서 만든 객체의 hashCode, equals로 결정된다)

# 5.2 스트림 슬라이싱(스트림의 요소 선택, 스킵)

## 5.2.1 프레디케이트를 이용한 슬라이싱(takeWhile, dropWhile)

- 이미 정렬이 되어있을 경우에 유용하다.

### takeWhile

무한 스트림을 포함한 모든 스트림에 프레디케이트를 적용해 스트림을 슬라이스 할 수 있다.

### dropWhile

프레디케이트가 처음으로 거짓이 되는 지점까지 발견된 요소를 버린다. (그 지점에서 작업을 중단하고 남은 모든 요소를 반환한다)

## 5.2.2 스트림 축소(limit)

주어진 값 이하의 크기를 갖는 새로운 스트림을 반환

## 5.2.3 요소 건너뛰기(skip)

처음 n개 요소를 제외한 스트림을 반환(limit과 상호보완적) 

# 5.3 매핑(특정 데이터 선택)

## 5.3.1 스트림의 각 요소에 함수 적용하기(map)

인수로 제공된 함수는 각 요소에 적용되며 함수를 적용된 결과가 새로운 요소로 매핑된다. 

## 5.3.2 스트림 평면화(flatMap)

flatMap :  스트림의 각 값을 다른 스트림으로 만든 다음에 모든 스트림을 하나의 스트림으로 연결

# 5.4 검색과 매칭 (특정 속성이 데이터 집합에 있는지 여부를 검색)

## 5.4.1 프레디케이트가 적어도 한 요소와 일치하는지 확인(anyMatch)

프레디케이트가 주어진 스트림에서 적어도 한 요소와 일치하는지 확인할 때 사용하며 불리언을 반환하므로 최종연산이다.

## 5.4.2 프레디케이트가 모든 요소와 일치하는지 검사(allMatch)

스트림의 모든 요소가 주어진 프레디케이트와 일치하는지 검사한다.

### NONMATCH

일치하는 요소가 없는지 확인

### 쇼트서킷

전체 스트림을 처리하지 않았음에도 결과를 반환할 수 있는 상황

ex. anyMatch, allMatch, nonMatch, findFirst, findAny, limit.. &&, ||

## 5.4.3 요소 검색(findAny)

현재 스트림에서 임의의 요소를 반환

### Optional

값의 존재나 부재 여부를 표현하는 컨테이너 클래스

값이 존재하는지 확인하고 값이 없을 때 어떠헥 처리할지 강제하는 기능을 제공함

- isPresent() : optional이 값을 포함하면 참(true)을 반환, 값을 포함하지 않으면 거짓(false)을 반환
- ifPresent(Consumer<T> block) : 값이 있으면 주어진 블록을 실행
- T get() : 값이 존재하면 값을 반환하고, 값이 없으면 NoSuchElementException을 일으킨다.
- T orElse(T other) : 값이 있으면 값을 반환, 없으면 기본값 반환

## 5.4.4 첫 번째 요소 찾기(findFirst)

논리적인 아이템 순서가 정해져있는 스트림에서 첫 번째 요소를 찾을 때 사용

# 5.5 리듀싱

모든 스트림 요소를 처리해서 값으로 도출하는 연산 : 리듀싱 연산 (폴드)

## 5.5.1 요소의 합

reduce는 두 개의 인수를 받아 리스트의 숫자를 모두 더하는 작업을 할 수 있다.

1. 초기값 0
2. 두 요소를 조합해서 새로운 값을 만드는 BinaryOperator<T>

int sum = numbers.stream().reduce(0, (a,b)→a+b)

### 초기값 없음

초기값을 받지 않도록 오버라이드 된 reduce도 있지만, 리스트가 비어있고 초기값이 없을때에는 합계를 반환할 수 없으므로 Optional객체를 반환한다.

## 5.5.2 최댓값과 최솟값

Optional<Integer> max = numbers.stream().reduce(Integer::max); 

# 5.7 숫자형 스트림

## 5.7.1 기본형 특화 스트림

특화 스트림은 오직 박싱 과정에서 일어나는 효율성과 관련있으며 스트림에 추가 기능을 제공하지는 않는다.

### 숫자 스트림 → 객체 스트림 복원: boxed

### OptionalInt

IntStream에서 최대값을 찾을 때 0이라는 기본값 때문에 잘못된 결과가 도출될 수 있다. 따라서 OptionalInt를 이용한다.

## 5.7.2 숫자 범위

- range : 시작값과 종료값이 결과에 포함되지 않는다.
- rangeClosed : 시작값과 종료값이 결과에 포함된다.

# 5.8 스트림 만들기

## 5.8.1 값으로 스트림 만들기(of, empty)

## 5.8.2 null이 될 수 있는 객체로 스트림 만들기(ofNullable)

## 5.8.3 배열로 스트림 만들기(Arrays.stream)

## 5.8.4 파일로 스트림 만들기

stream 인터페이스는 AutoCloseable 인터페이스를 구현하여 자원을 자동으로관리한다.  

## 5.8.5 함수로 무한 스트림 만들기(iterate, generate)

### iterate

크기가 고정되지 않은 스트림을 만들 수 있다.

무한 스트림 = 언바운드 스트림

### generate

iterate와 달리 생산된 각 값을 연속적으로 계산하지 않는다.